/**
 * Description : launch.json - ğŸ“Œ VS Code ë””ë²„ê·¸ & í…ŒìŠ¤íŠ¸ ì„¤ì • (Agape-Care)
 * Author : Shiwoo Min
 * Date : 2026-01-22
 * Note : Vite + React + NestJS + Vitest + Playwright ì‹¤ì‚¬ìš© ê¸°ì¤€
 */
{
  "version": "0.2.0",
  "configurations": [

    // Vitest: í˜„ì¬ íŒŒì¼ ë””ë²„ê·¸
    {
      "name": "Vitest - Current File (debug)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "node",
      "program": "${workspaceFolder}/node_modules/vitest/vitest.mjs",
      "args": [
        "run",
        "${file}",
        "--no-threads",
        "--watch=false",
        "--config",
        "vitest.config.ts"
      ],
      "envFile": "${workspaceFolder}/.env.test",
      "env": {
        "NODE_ENV": "test"
      },
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**"]
    },

    // Vitest: ì „ì²´ í…ŒìŠ¤íŠ¸ 1íšŒ ì‹¤í–‰
    {
      "name": "Vitest - Run All",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "node",
      "program": "${workspaceFolder}/node_modules/vitest/vitest.mjs",
      "args": [
        "run",
        "--watch=false",
        "--config",
        "vitest.config.ts"
      ],
      "envFile": "${workspaceFolder}/.env.test",
      "env": {
        "NODE_ENV": "test"
      },
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**"]
    },

    // Vitest: Watch ëª¨ë“œ
    {
      "name": "Vitest - Watch",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "node",
      "program": "${workspaceFolder}/node_modules/vitest/vitest.mjs",
      "args": [
        "watch",
        "--config",
        "vitest.config.ts"
      ],
      "envFile": "${workspaceFolder}/.env.test",
      "env": {
        "NODE_ENV": "test"
      },
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**"]
    },

    // NestJS API ë””ë²„ê·¸ (apps/api)
    {
      "name": "NestJS API - Debug",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "node",
      "args": [
        "--inspect",
        "-r",
        "ts-node/register",
        "-r",
        "tsconfig-paths/register",
        "apps/api/src/main.ts"
      ],
      "envFile": "${workspaceFolder}/.env",
      "env": {
        "NODE_ENV": "development"
      },
      "cwd": "${workspaceFolder}",
      "sourceMaps": true,
      "autoAttachChildProcesses": true,
      "console": "integratedTerminal",
      "skipFiles": ["<node_internals>/**"]
    }
  ]
}
