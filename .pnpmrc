# Description : .pnpmrc - ğŸ“Œ PNPM ì›Œí¬ìŠ¤í˜ì´ìŠ¤ íŒ¨í‚¤ì§€ í˜¸ì´ìŠ¤íŒ… ì„¤ì •
# Author : Shiwoo Min
# Date  : 2025-09-12
# 09-17 - ìŠ¤íƒ€ì¼ë§, í…ŒìŠ¤íŠ¸, ì½”ë“œ í’ˆì§ˆ, ORM/DB ê´€ë ¨ íŒ¨í‚¤ì§€ í˜¸ì´ìŠ¤íŒ… ì¶”ê°€
# 09-18 - TypeScript ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•œ shamefully-hoist ì„¤ì • ì¶”ê°€
# 09-22 - pnpm v10 deploy ì •ì±… ëŒ€ì‘ (inject-workspace-packages ì¶”ê°€)
# 09-22 - Docker ë¹Œë“œ ìµœì í™” ì„¤ì • ì¶”ê°€ (ë„¤íŠ¸ì›Œí¬, ìºì‹œ, ì¬ì‹œë„)
# 10-08 - pnpm v10 í˜¸í™˜ì„± ìˆ˜ì • (shamefully-hoist/symlink ì„¤ì • ì œê±°, React/Next í˜¸ì´ìŠ¤íŒ… ì¶”ê°€)
# NOTE :
#   - public-hoist-pattern ì„¤ì •ì„ í†µí•´ íŠ¹ì • íŒ¨í‚¤ì§€ë“¤ì„ ë£¨íŠ¸ node_modulesë¡œ ëŒì–´ì˜¬ë ¤
#     ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ê³µìœ  ì‚¬ìš© (ì¤‘ë³µ ì„¤ì¹˜ ë°©ì§€, ë²„ì „ ì¼ê´€ì„± ìœ ì§€)
#   - auto-install-peers ì„¤ì •ì„ í†µí•´ peer dependencies ìë™ ì„¤ì¹˜ í™œì„±í™”
#   - pnpm v10 ì´ìƒì—ì„œëŠ” node-linker=hoisted ë¡œ í†µí•© (shamefully-hoist ë¶ˆí•„ìš”)
#   - symlink=false ì„¤ì •ì€ pnpm v10 ì´ìƒì—ì„œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë§í¬ë¥¼ ê¹¨ëœ¨ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì œê±°
#   - nxCloudAccessTokenì€ .env íŒŒì¼ì—ì„œ ë¡œë“œí•˜ë„ë¡ ë³€ê²½ (ë³´ì•ˆ ê°•í™”)

# ê³µí†µ í˜¸ì´ìŠ¤íŒ… íŒ¨í„´

# ëª¨ë“  @types/* íŒ¨í‚¤ì§€ë“¤
public-hoist-pattern[]=*@types/*

# TypeScript ì»´íŒŒì¼ëŸ¬ ë° ê´€ë ¨ ë„êµ¬ë“¤ ê³µí†µ ì‚¬ìš©
public-hoist-pattern[]=typescript
public-hoist-pattern[]=ts-node
public-hoist-pattern[]=tsx

# React / Next í™˜ê²½ í†µì¼ (ì¤‘ë³µ React ì¸ìŠ¤í„´ìŠ¤ ë°©ì§€)
public-hoist-pattern[]=react
public-hoist-pattern[]=react-dom
public-hoist-pattern[]=next

# ESLint ê´€ë ¨ íŒ¨í‚¤ì§€ë“¤ (í”ŒëŸ¬ê·¸ì¸, ì„¤ì • ë“±) í†µì¼
public-hoist-pattern[]=eslint*

# Prettier í¬ë§·í„° ê³µí†µ ì‚¬ìš©
public-hoist-pattern[]=prettier

# Vitest í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ê³µìœ 
public-hoist-pattern[]=vitest

# Vite ë¹Œë“œ ë„êµ¬ ê³µìœ 
public-hoist-pattern[]=vite

# Playwright E2E í…ŒìŠ¤íŠ¸ ë„êµ¬ ë° ê´€ë ¨ íŒ¨í‚¤ì§€ë“¤
public-hoist-pattern[]=playwright*

# NestJS í”„ë ˆì„ì›Œí¬ í˜¸ì´ìŠ¤íŒ…
public-hoist-pattern[]=@nestjs/*

# ìŠ¤íƒ€ì¼ë§ (Tailwind / PostCSS)
public-hoist-pattern[]=tailwindcss
public-hoist-pattern[]=postcss

# ì½”ë“œ í’ˆì§ˆ ë„êµ¬ (Lint-Staged / Husky)
public-hoist-pattern[]=lint-staged
public-hoist-pattern[]=husky

# ORM/DB
public-hoist-pattern[]=prisma

# ê³µìš© ìœ í‹¸ë¦¬í‹° (Zod, Dayjs ë“±)
public-hoist-pattern[]=zod
public-hoist-pattern[]=dayjs

# peer dependencies ìë™ ì„¤ì¹˜
auto-install-peers=true

# í˜¸ì´ìŠ¤íŒ… ë° ë§í¬ ë°©ì‹
# - pnpm v10 ì´ìƒì—ì„œëŠ” node-linker=hoisted ê°€ ê¶Œì¥
# - shamefully-hoist ëŠ” ì¤‘ë³µ ì˜µì…˜ìœ¼ë¡œ ì œê±°
# - symlink=false ì„¤ì •ì€ ë¹„ê¶Œì¥ (ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë§í¬ ê¹¨ì§ˆ ìˆ˜ ìˆìŒ)
node-linker=hoisted
link-workspace-packages=true
prefer-workspace-packages=true
inject-workspace-packages=true
ignore-workspace-root-check=true

# Docker ë¹Œë“œ ìµœì í™” ì„¤ì •
# - Docker ë¹Œë“œ ì¤‘ ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ ë° íŒ¨í‚¤ì§€ ì¬ì‹œë„ ê°•í™”
# - ë„¤íŠ¸ì›Œí¬ ë™ì‹œì„±(network-concurrency)ì„ ì•½ê°„ ë†’ì—¬ ë¹Œë“œ ì†ë„ ê°œì„ 

# ë„¤íŠ¸ì›Œí¬ ì„¤ì • (Docker ë¹Œë“œ ì‹œ íƒ€ì„ì•„ì›ƒ ë°©ì§€)
network-timeout=300000
fetch-timeout=300000
network-concurrency=8

# ì¬ì‹œë„ ì„¤ì • (ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ìƒí™© ëŒ€ì‘)
fetch-retries=5
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=120000

# ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„¤ì •
registry=https://registry.npmjs.org/

# ìºì‹œ ì„¤ì • (Docker ë ˆì´ì–´ ìºì‹± ìµœì í™”)
store-dir=.pnpm-store
cache-dir=.pnpm-cache

# ë¡œê·¸ ë ˆë²¨ (ë¹Œë“œ ë””ë²„ê¹…ìš©)
loglevel=info
progress=true

# íŒ¨í‚¤ì§€ ê´€ë¦¬ ì •ì±…
# - pnpm v10 ì´ìƒì—ì„œëŠ” package-manager-strict ì˜µì…˜ ì œê±°
# - ëŒ€ì‹  ignore-workspace-root-check ë¡œ ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ í—ˆìš©
# - save-exact=false ìœ ì§€ (ë²„ì „ ì•ˆì •ì„± + ìœ ì—°ì„±)
save-exact=false
audit-level=moderate
fund=false

# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •
# - link-workspace-packages í™œì„±í™” ì‹œ ë‚´ë¶€ íŒ¨í‚¤ì§€ ìë™ ì—°ê²°
# - prefer-workspace-packages ë¡œ workspace ìš°ì„  ì„¤ì¹˜
link-workspace-packages=true
prefer-workspace-packages=true

# ë¹Œë“œ ìµœì í™”
# - package-import-method=auto : pnpmì´ ìë™ìœ¼ë¡œ ìµœì  ë°©ì‹ ì„ íƒ
package-import-method=auto

# CI/CD ì•ˆì •ì„±
# - frozen-lockfile=false : CI/CD í™˜ê²½ì—ì„œ ë²„ì „ ìœ ì—°ì„± í—ˆìš©
frozen-lockfile=false
